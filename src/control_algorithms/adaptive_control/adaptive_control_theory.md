# 自适应控制理论与实现

## 1. 自适应控制概述

自适应控制是一种能够自动调整控制器参数以适应系统特性变化的控制方法。主要用于以下场景：
- 系统参数未知或时变
- 系统存在非线性特性
- 系统受到未知扰动

## 2. 基本原理

### 2.1 系统模型

考虑一阶线性系统：
```
dy/dt + a*y = b*u
```

其中：
- `y` 是系统输出
- `u` 是控制输入
- `a` 和 `b` 是未知参数

### 2.2 MIT规则

MIT规则是一种基于梯度的自适应控制方法，其核心思想是通过最小化输出误差的平方来调整控制器参数。

输出误差定义为：
```
e = y_d - y
```

参数更新律为：
```
dθ̂/dt = γ * e * φ
```

其中：
- `θ̂` 是参数估计值 [â; b̂]
- `γ` 是自适应增益
- `φ` 是回归向量 [-y; u]

## 3. 实现细节

### 3.1 控制律设计

控制输入 `u` 由以下公式计算：
```
u = (dy_d/dt + â*y) / b̂
```

### 3.2 参数更新

使用欧拉积分实现离散时间的参数更新：
```
θ̂(k+1) = θ̂(k) + γ * e(k) * φ(k) * Δt
```

### 3.3 稳定性考虑

- 自适应增益 `γ` 必须适当选择：
  - 太大可能导致系统不稳定
  - 太小则收敛速度慢
- 通常需要对参数估计值进行限制，确保其为正值

## 4. 代码实现

### 4.1 核心函数

```matlab
function [u, theta_hat] = adaptive_controller(y, yd, dyd, theta_hat, P, gamma, dt)
    % 计算回归向量
    phi = [-y; u];
    
    % 计算输出误差
    e = yd - y;
    
    % MIT规则参数更新
    theta_hat = theta_hat + gamma * e * phi * dt;
    
    % 确保参数为正值
    theta_hat = max(theta_hat, 0.01);
    
    % 计算控制输入
    u = (dyd + theta_hat(1) * y) / theta_hat(2);
end
```

### 4.2 测试脚本

测试脚本实现了阶跃响应测试，包括：
- 期望轨迹生成
- 自适应控制器调用
- 实际系统仿真
- 结果可视化和性能评估

## 5. 性能评估

### 5.1 评估指标

- 稳态误差
- 上升时间
- 调节时间
- 超调量
- 均方根误差 (RMSE)

### 5.2 影响因素

- 自适应增益 `γ`
- 初始参数估计值
- 采样时间 `dt`
- 系统参数变化率

## 6. 扩展与改进

### 6.1 RLS参数辨识

递推最小二乘（RLS）是一种更高效的参数辨识方法，具有以下优点：
- 收敛速度快
- 数值稳定性好
- 能够处理噪声

### 6.2 模型参考自适应控制

模型参考自适应控制（MRAC）通过将系统输出与参考模型输出进行比较，调整控制器参数，使系统输出跟踪参考模型输出。

### 6.3 自适应PID控制

将自适应控制与PID控制结合，实现PID参数的自动调整，提高系统的适应性和鲁棒性。

## 7. 应用场景

自适应控制广泛应用于以下领域：
- 航空航天：飞行器姿态控制
- 工业过程控制：化工、石油、电力
- 机器人控制：机械臂、移动机器人
- 自动驾驶：车辆动力学控制
- 生物医学工程：人工心脏、假肢控制

## 8. 结论

自适应控制是一种强大的控制方法，能够自动适应系统特性的变化。基于MIT规则的自适应控制实现简单，易于理解，适合作为自适应控制的入门学习。通过适当调整自适应增益和初始参数，可以获得良好的控制性能。
