# 人体外骨骼控制系统

## 项目概述
本项目旨在开发一套完整的人体外骨骼机器控制系统，包括材料系统和控制系统。项目采用模块化设计，从手臂系统优先实现，逐步扩展到背部脊椎系统、腿部系统，最终实现全身系统集成。

当前开发重点为**手臂外骨骼系统**，采用分层主控架构，结合先进控制算法和轻量化设计，实现安全、高效、舒适的人机协作。

## 核心功能
- 多层次、分布式的智能控制架构
- 多种先进控制算法（自适应、模糊PID、MPC、阻抗控制）
- 实时通信网络（EtherCAT、CANopen、SPI/I2C）
- 高安全等级设计（ISO 13849-1 PLd，IEC 61508 SIL 3）
- 复杂的人机交互系统
- 模块化硬件平台支持（从树莓派Zero 2 W + RP2040到Nvidia Jetson AGX Xavier）
- 基于EMG的人体意图识别
- 实时轨迹跟踪与力反馈

## 目录结构
```
├── docs/                  # 文档目录
│   ├── architecture/      # 架构文档
│   ├── 3d_modeling/       # 3D建模文档
│   ├── development_roadmap/  # 开发路线图
│   └── user_manual/       # 用户手册
├── src/                   # 源代码目录
│   ├── control_algorithms/  # 控制算法实现
│   ├── communication/     # 通信架构实现
│   ├── safety/            # 安全机制实现
│   ├── human_interface/   # 人机交互实现
│   ├── hardware_drivers/  # 硬件驱动实现
│   └── software_framework/    # 软件框架
├── models/                # 3D模型目录
│   ├── arm/               # 手臂模块
│   │   └── Doc/           # 手臂系统文档
│   │       ├── 3.1 阶段1：核心控制硬件采购与验证（第1-2周）/
│   │       ├── 3.2 阶段2：控制系统软件实现与优化（第3-6周）/
│   │       ├── 3.3 阶段3：机械结构设计与3D建模（第7-9周）/
│   │       ├── 3.4 阶段4：完整硬件系统搭建（第10-12周）/
│   │       ├── 3.5 阶段5：系统集成与测试（第13-15周）/
│   │       ├── 3.6 阶段6：预实验与算法调优（第16-17周）/
│   │       ├── 3.7 阶段7：正式实验与数据分析（第18-21周）/
│   │       ├── arm_system_development_plan.md
│   │       ├── arm_system_Zero 2 W+RP2040.md
│   │       └── 任务书.md
│   ├── back/              # 背部模块
│   ├── leg/               # 腿部模块
│   └── spine/             # 脊椎模块
├── tests/                 # 测试目录
├── extern/                # 外部依赖
├── README.md
└── project_execution_plan.md
```

## 开发进展

### 当前阶段
我们正在进行**手臂外骨骼系统**的开发，采用**方案4：树莓派Zero 2 W + RP2040**的分层主控架构。

### 阶段划分

| 阶段 | 核心任务 | 预计时间 | 状态 |
|------|----------|----------|------|
| 阶段1 | 核心控制硬件采购与验证 | 2周 | 待开始 |
| 阶段2 | 控制系统软件实现与优化 | 4周 | 待开始 |
| 阶段3 | 机械结构设计与3D建模 | 3周 | 待开始 |
| 阶段4 | 完整硬件系统搭建 | 3周 | 待开始 |
| 阶段5 | 系统集成与测试 | 3周 | 待开始 |
| 阶段6 | 预实验与算法调优 | 2周 | 待开始 |
| 阶段7 | 正式实验与数据分析 | 4周 | 待开始 |

## 主控方案

### 方案4：树莓派Zero 2 W + RP2040

#### 方案简介
采用分层主控架构，使用树莓派Zero 2 W作为上层智能主控，负责处理人体信号和动作意图；使用RP2040作为底层实时主控，负责驱动电机和实时运动控制。

#### 核心优势
- **模块化设计**：上层与底层主控分离，便于后续升级和扩展
- **低成本**：树莓派Zero 2 W（约100元）+ RP2040（约4元）
- **轻量化低功耗**：总功耗 < 2W，适合电池供电的穿戴场景
- **开发便捷**：支持Python/Linux和Arduino/CircuitPython
- **实时性与算力平衡**：RP2040保证实时控制，树莓派提供基础算力

#### 适用场景
- 快速原型开发和功能验证
- 基础肘关节辅助控制实验
- 肌电信号采集与处理研究
- 模块化设计的可扩展系统

## 控制算法

支持多种先进控制算法，可根据不同应用场景选择：

| 算法类型 | 实现平台 | 应用场景 |
|----------|----------|----------|
| PID控制 | RP2040 | 基础位置/速度控制 |
| 自适应控制 | 树莓派Zero 2 W | 参数变化的动态环境 |
| 模糊PID控制 | 树莓派Zero 2 W | 非线性系统控制 |
| 阻抗控制 | RP2040+树莓派 | 力-位置混合控制 |
| 简化MPC | 树莓派Zero 2 W | 预测性轨迹控制 |

## 传感器支持

- **sEMG传感器**：多通道肌电信号采集
- **IMU传感器**：姿态角计算、运动轨迹跟踪
- **力传感器**：力反馈测量
- **位置传感器**：关节角度测量与反馈

## 任务管理

项目采用任务清单管理，详细任务计划请查看 `models/arm/Doc/任务书.md`。

### 任务统计
- 总任务数：102个
- 阶段1：核心控制硬件采购与验证（18个任务）
- 阶段2：控制系统软件实现与优化（23个任务）
- 阶段3：机械结构设计与3D建模（11个任务）
- 阶段4：完整硬件系统搭建（14个任务）
- 阶段5：系统集成与测试（12个任务）
- 阶段6：预实验与算法调优（11个任务）
- 阶段7：正式实验与数据分析（13个任务）

## 验收标准

### 功能完整性
- 手臂系统能够实现预定的关节运动范围（0°-90°）
- 控制系统能够接收和处理sEMG信号
- 系统能够实现力反馈功能
- 安全机制能够正常工作，包括紧急停止、碰撞检测和过载保护
- 模块化设计便于组装和升级
- 预留扩展接口可用，支持功能扩展

### 性能指标
- 控制系统响应时间 < 10ms
- 通信延迟 < 1ms
- 轨迹跟踪RMSE < 3°
- 肌肉疲劳降低率 > 20%
- 系统总功耗 < 2W

### 安全性
- 通过ISO 13849-1 PLd安全认证
- 系统能够在紧急情况下立即停止
- 碰撞检测准确率 > 95%
- 硬件故障发生率 < 5%
- 软件崩溃率 < 1%

## 开发路线

### 总体开发路线
1. **阶段一**：手臂系统开发（进行中）
2. **阶段二**：背部脊椎系统开发
3. **阶段三**：腿部系统开发
4. **阶段四**：全身系统集成
5. **阶段五**：批量生产准备

### 详细开发计划
请参考 `docs/development_roadmap/` 目录下的详细开发路线图。

## 技术栈

### 硬件平台
- 上层主控：树莓派Zero 2 W、RK3588核心板、Nvidia Jetson AGX Xavier
- 底层主控：RP2040、STM32系列、TI DSP
- 执行器：Dynamixel电机、小型舵机、直流无刷电机
- 传感器：sEMG传感器、IMU传感器、力传感器、位置传感器

### 软件平台
- 操作系统：Raspberry Pi OS Lite、FreeRTOS、CircuitPython
- 开发框架：ROS 2 Humble
- 编程环境：VSCode + 远程开发插件
- 仿真软件：MATLAB/Simulink
- 数据分析：Python + NumPy + Pandas + Matplotlib

## 项目管理

### 版本控制
- Git + GitHub

### 协作工具
- Git进行版本控制，采用模块化分支管理
- Jira进行任务管理和进度跟踪
- Confluence进行文档管理
- Slack进行团队沟通

## 贡献指南

1. Fork本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启Pull Request

## 许可证

本项目采用MIT许可证，详情请查看LICENSE文件。

## 联系方式

如有问题或建议，请通过GitHub Issues联系我们。

## 更新日志

### 2026-01-15
- 添加手臂外骨骼系统开发计划
- 添加方案4：树莓派Zero 2 W + RP2040详细文档
- 添加任务管理清单
- 更新README.md结构和内容

## 致谢

感谢所有为本项目做出贡献的开发者和研究人员！